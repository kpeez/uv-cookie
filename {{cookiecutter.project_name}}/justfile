set shell := ["bash", "-euo", "pipefail", "-c"]

default: help

install:
    echo "ğŸ“¦ Creating virtual environment"
    uv sync --all-groups
    echo "ğŸ› ï¸ Installing developer tools..."
    uv run prek install

# Run code quality tools (ruff and ty)
check:
    @echo "ğŸ§¹ Formatting code: Running ruff format"
    @uv run ruff format
    @echo "âš¡ï¸ Linting code: Running ruff check"
    @uv run ruff check . --fix
    @echo "ğŸ” Type checking: Running ty"
    @uv run ty check .

# Test the code with pytest
test:
    @echo "ğŸ§ª Testing code: Running pytest"
    @uv run pytest

{% if cookiecutter.mkdocs == 'y' -%}
# Build and serve the documentation locally
docs:
    @uv run mkdocs serve

# Test if documentation can be built without errors
docs-test:
    @echo "âš™ï¸ Testing documentation build"
    @uv run mkdocs build --strict
{% endif %}
# Update dependencies and prek hooks
update:
    @echo "âš™ï¸ Updating dependencies and prek hooks"
    uv lock --upgrade
    uv run prek autoupdate

help:
    @just --list
